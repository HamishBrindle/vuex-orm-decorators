import { ORMDatabase } from './database';
/**
 * Creates an vuex-orm Model
 * @param entityName The name of the entity to be used as the key for the state
 */
export function OrmModel(entityName, parentEntity, types, typeKey) {
    return function (constructor) {
        var model = constructor;
        // Set the entity name on the model constructor
        model.entity = entityName;
        // Set the parent entity name on the model constructo (if present)
        if (parentEntity) {
            model.baseEntity = parentEntity;
        }
        // Setup the types and descriminator (if set)
        if (types) {
            model.types = function () { return types; };
        }
        if (types && typeKey) {
            model.typeKey = typeKey;
        }
        // Add the fields generated by tha attribute decorators
        model.fields = function () { return model._fields || {}; };
        // Register the entity in the database
        ORMDatabase.registerEntity(model);
        return constructor;
    };
}
//# sourceMappingURL=model.js.map